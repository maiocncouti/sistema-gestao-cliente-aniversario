<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o de Clientes</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header com Logo -->
        <header class="header">
            <div class="header-top">
                <div class="logo-container">
                    <img id="company-logo" src="" alt="Logo da Empresa" class="logo-img" style="display: none;">
                    <h1 id="company-name">Nome da Empresa</h1>
                </div>
                <div class="header-right">
                    <div class="license-status-header">
                        <div id="license-status-card" class="license-status-card-header">
                            <span id="license-status-text">Carregando...</span>
                            <span id="license-time-text">--:--:--</span>
                        </div>
                    </div>
                    <!-- Informa√ß√µes do Usu√°rio Logado -->
                    <div id="user-info-header" class="user-info-header" style="display: none;">
                        <div class="user-info-content">
                            <img id="logged-user-photo" class="user-avatar" src="" alt="Foto do usu√°rio" style="display: none;">
                            <span class="user-name-display"><span id="logged-user-name">Usu√°rio</span></span>
                            <div class="user-actions">
                                <button class="btn-user-action" onclick="switchUser()" title="Trocar de usu√°rio">üîÑ Trocar</button>
                                <button class="btn-user-action" onclick="handleLogout()" title="Sair do sistema">üö™ Sair</button>
                            </div>
                        </div>
                    </div>
                    <nav class="nav-menu">
                        <button class="nav-btn active" data-section="home">In√≠cio</button>
                        <button class="nav-btn" data-section="greetings">Felicita√ß√µes</button>
                        <button class="nav-btn" data-section="all-clients">Clientes</button>
                        <div class="menu-dots-container">
                            <button class="nav-btn menu-dots" data-section="more-options" onclick="showSection('more-options')">‚ãØ</button>
                        </div>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Se√ß√£o In√≠cio -->
        <section id="home" class="section active">
            <!-- Tela de Login (mostra quando n√£o logado) -->
            <div id="login-screen" class="login-screen" style="display: none;">
                <div class="login-container">
                    <h2 id="login-title">Login</h2>
                    <form id="login-form" class="form">
                        <div class="form-group" id="username-group">
                            <label for="login-username">Usu√°rio *</label>
                            <input type="text" id="login-username" required autocomplete="username">
                        </div>
                        <div class="form-group" id="selected-user-info" style="display: none;">
                            <label>Usu√°rio Selecionado:</label>
                            <div style="padding: 10px; background: #f0f4ff; border-radius: 8px; margin-bottom: 15px;">
                                <strong id="selected-user-name"></strong>
                                <button type="button" class="btn btn-secondary" onclick="cancelUserSwitch()" style="margin-left: 10px; padding: 5px 10px; font-size: 12px;">Cancelar</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Senha *</label>
                            <input type="password" id="login-password" required autocomplete="current-password">
                        </div>
                        <button type="submit" class="btn btn-primary">Entrar</button>
                    </form>
                </div>
            </div>
            
            <!-- Conte√∫do Principal (mostra quando logado) -->
            <div id="home-content" class="home-content">
                <h2>Bem-vindo ao Sistema de Gest√£o de Clientes</h2>
                <div id="license-expiration-warning-home" class="license-expiration-warning" style="display: none;">
                    <p>‚ö†Ô∏è Sua licen√ßa est√° expirada. Por favor, renove sua licen√ßa.</p>
                </div>
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>Clientes Cadastrados</h3>
                        <div class="birthday-stats">
                            <div class="birthday-stat-item" style="flex: 1;">
                                <span class="birthday-stat-label">Total</span>
                                <span id="total-clients" class="birthday-stat-value">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h3>Anivers√°rios</h3>
                        <div class="birthday-stats">
                            <div class="birthday-stat-item">
                                <span class="birthday-stat-label">Hoje</span>
                                <span id="birthday-count-today" class="birthday-stat-value">0</span>
                            </div>
                            <div class="birthday-stat-item" id="birthday-stat-range1" style="display: none;">
                                <span id="birthday-label-range1" class="birthday-stat-label">7 dias</span>
                                <span id="birthday-count-range1" class="birthday-stat-value">0</span>
                            </div>
                            <div class="birthday-stat-item" id="birthday-stat-range2" style="display: none;">
                                <span id="birthday-label-range2" class="birthday-stat-label">30 dias</span>
                                <span id="birthday-count-range2" class="birthday-stat-value">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lista de Aniversariantes de Hoje no Dashboard -->
                <div id="today-birthdays-dashboard" class="today-birthdays-dashboard">
                    <!-- Cards de aniversariantes de hoje ser√£o carregados via JavaScript -->
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Felicita√ß√µes -->
        <section id="greetings" class="section">
            <h2>Felicita√ß√µes</h2>
            <div id="clients-list" class="clients-list"></div>
            <button id="send-birthday-btn" class="btn btn-primary">Enviar Felicita√ß√µes</button>
        </section>

        <!-- Se√ß√£o Lista de Todos os Clientes -->
        <section id="all-clients" class="section">
            <div class="clients-layout">
                <!-- Conte√∫do Principal -->
                <div class="clients-main-content">
                    <div id="clients-list-view" class="clients-view active">
                        <h2>Lista de Clientes</h2>
                        <div id="all-clients-list" class="clients-list"></div>
                    </div>
                    
                    <div id="clients-register-view" class="clients-view">
                        <h2>Cadastrar Novo Cliente</h2>
                        <form id="client-form" class="form">
                            <div class="form-group">
                                <label for="client-photo-input">Foto do Cliente</label>
                                <input type="file" id="client-photo-input" accept="image/*">
                                <div class="photo-preview">
                                    <img id="client-photo-preview" src="" alt="Preview da Foto" style="display: none;">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="client-name">Nome *</label>
                                <input type="text" id="client-name" required>
                            </div>

                            <div class="form-group">
                                <label for="client-cpf">CPF</label>
                                <input type="text" id="client-cpf" placeholder="000.000.000-00">
                            </div>

                            <div class="form-group">
                                <label for="client-birthdate">Data de Nascimento *</label>
                                <input type="date" id="client-birthdate" required>
                            </div>

                            <div class="form-group">
                                <label>Telefones *</label>
                                <div id="phones-container">
                                    <div class="dynamic-field">
                                        <input type="tel" class="phone-input" placeholder="(00) 00000-0000" required>
                                        <button type="button" class="btn-remove" onclick="removeField(this, 'phone')">Remover</button>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary" onclick="addField('phone')">+ Adicionar Telefone</button>
                            </div>

                            <div class="form-group">
                                <label>Emails *</label>
                                <div id="emails-container">
                                    <div class="dynamic-field">
                                        <input type="email" class="email-input" placeholder="email@exemplo.com" required>
                                        <button type="button" class="btn-remove" onclick="removeField(this, 'email')">Remover</button>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary" onclick="addField('email')">+ Adicionar Email</button>
                            </div>

                            <button type="submit" class="btn btn-primary">Cadastrar Cliente</button>
                            <button type="button" class="btn btn-secondary" onclick="showClientsListView()" style="margin-left: 10px;">Cancelar</button>
                        </form>
                    </div>
                </div>

                <!-- Menu Lateral Direito -->
                <div class="clients-sidebar">
                    <h3>Menu</h3>
                    <button class="sidebar-btn active" onclick="showClientsListView()">
                        üìã Lista de Clientes
                    </button>
                    <button class="sidebar-btn" onclick="showClientsRegisterView()">
                        ‚ûï Cadastrar Novo Cliente
                    </button>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Perfil da Empresa -->
        <section id="company" class="section">
            <h2>Perfil da Empresa</h2>
            <form id="company-form" class="form">
                <div class="form-group">
                    <label for="company-logo-input">Logo da Empresa</label>
                    <input type="file" id="company-logo-input" accept="image/jpeg,image/jpg,image/png">
                    <div class="logo-preview">
                        <img id="logo-preview" src="" alt="Preview do Logo" style="display: none;">
                    </div>
                    <button type="button" class="btn btn-danger" id="remove-logo-btn" onclick="removeCompanyLogo()" style="margin-top: 10px; display: none;">üóëÔ∏è Remover Logo</button>
                </div>

                <div class="form-group">
                    <label for="company-header-image-input">Imagem de Fundo do Cabe√ßalho (opcional)</label>
                    <input type="file" id="company-header-image-input" accept="image/jpeg,image/jpg,image/png">
                    <div class="theme-bg-preview" id="company-header-preview">
                        <span>Pr√©-visualiza√ß√£o da imagem de fundo do cabe√ßalho.</span>
                    </div>
                    <p class="color-help">Formatos permitidos: JPG e PNG. A imagem ser√° ajustada automaticamente para preencher a √°rea laranja atr√°s da logo.</p>
                    <button type="button" class="btn btn-danger" id="remove-header-bg-btn" onclick="removeCompanyHeaderBackground()" style="margin-top: 10px; display: none;">üóëÔ∏è Remover Fundo</button>
                </div>

                <div class="form-group">
                    <label for="company-name-input">Nome da Empresa *</label>
                    <input type="text" id="company-name-input" required>
                </div>

                <div class="form-group">
                    <label for="owner-name">Nome do Propriet√°rio</label>
                    <input type="text" id="owner-name">
                </div>

                <div class="form-group">
                    <label for="owner-contact">Contato do Propriet√°rio</label>
                    <input type="tel" id="owner-contact" placeholder="(00) 00000-0000">
                </div>

                <div class="form-group">
                    <label for="owner-email">Email do Propriet√°rio</label>
                    <input type="email" id="owner-email" placeholder="email@exemplo.com">
                </div>

                <div class="form-group">
                    <label for="owner-birthdate">Data de Nascimento do Propriet√°rio</label>
                    <input type="date" id="owner-birthdate">
                </div>

                <div class="form-group">
                    <label for="company-address">Endere√ßo</label>
                    <input type="text" id="company-address">
                </div>

                <div class="form-group">
                    <label for="company-description">Descri√ß√£o</label>
                    <textarea id="company-description" rows="4"></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Salvar Dados da Empresa</button>
                <button type="button" class="btn btn-secondary" onclick="showSection('more-options')" style="margin-top: 15px; margin-left: 10px;">‚Üê Voltar</button>
            </form>
        </section>

        <!-- Se√ß√£o Mais Op√ß√µes -->
        <section id="more-options" class="section">
            <h2>Mais Op√ß√µes</h2>
            <div class="more-options-grid">
                <div class="option-card" onclick="showSection('company')">
                    <div class="option-icon">üè¢</div>
                    <h3>Perfil da Empresa</h3>
                    <p>Configure os dados da sua empresa</p>
                </div>
                
                <div class="option-card" onclick="showSection('backup')">
                    <div class="option-icon">üíæ</div>
                    <h3>Backup dos Dados</h3>
                    <p>Fa√ßa backup de todos os seus dados</p>
                </div>
                
                <div class="option-card" onclick="showSection('restore')">
                    <div class="option-icon">üì•</div>
                    <h3>Restaurar Dados</h3>
                    <p>Restaura dados a partir de um backup</p>
                </div>
                
                <div class="option-card" onclick="showSection('support')">
                    <div class="option-icon">üÜò</div>
                    <h3>Suporte</h3>
                    <p>Entre em contato conosco</p>
                </div>
                
                <div class="option-card" onclick="showSection('license')">
                    <div class="option-icon">üîë</div>
                    <h3>Adquirir Licen√ßa</h3>
                    <p>Ative uma nova licen√ßa</p>
                </div>
                
                <div class="option-card" onclick="showSection('license-status')">
                    <div class="option-icon">üìä</div>
                    <h3>Status da Licen√ßa</h3>
                    <p>Verifique o status da sua licen√ßa</p>
                </div>
                
                <div class="option-card" onclick="showSection('users')">
                    <div class="option-icon">üë•</div>
                    <h3>Usu√°rios</h3>
                    <p>Gerencie os usu√°rios do sistema</p>
                </div>
                
                <div class="option-card" onclick="showSection('system-log')">
                    <div class="option-icon">üìã</div>
                    <h3>Log do Sistema</h3>
                    <p>Visualize os registros de a√ß√µes do sistema</p>
                </div>
                
                <div class="option-card" onclick="showSection('settings')">
                    <div class="option-icon">‚öôÔ∏è</div>
                    <h3>Cor do Tema</h3>
                    <p>Personalize a apar√™ncia do sistema</p>
                </div>

                <div class="option-card" onclick="showSection('birthday-card-settings')">
                    <div class="option-icon">üéÇ</div>
                    <h3>Card de Anivers√°rios</h3>
                    <p>Configurar faixas de dias do card de anivers√°rios</p>
                </div>

                <div class="option-card" onclick="showSection('button-settings')">
                    <div class="option-icon">üîò</div>
                    <h3>Defini√ß√µes dos Bot√µes</h3>
                    <p>Personalizar cores e bordas dos bot√µes de navega√ß√£o</p>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Configura√ß√£o do Card de Anivers√°rios -->
        <section id="birthday-card-settings" class="section">
            <h2>Configura√ß√£o do Card de Anivers√°rios</h2>
            <div class="settings-container">
                <div class="settings-card">
                    <h3>Op√ß√µes de Exibi√ß√£o</h3>
                    <p style="margin-bottom: 15px;">O card de anivers√°rios do painel inicial mostrar√° sempre a quantidade de aniversariantes de <strong>Hoje</strong>. Voc√™ pode adicionar at√© duas faixas extras configur√°veis.</p>
                    
                    <form id="birthday-card-form" class="form">
                        <div class="form-group">
                            <label>Faixas exibidas no card:</label>
                            <select id="birthday-card-mode">
                                <option value="today">Somente Hoje</option>
                                <option value="today_range1">Hoje + Faixa 1</option>
                                <option value="today_range1_range2">Hoje + Faixa 1 + Faixa 2</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Faixa 1 (dias a partir de hoje, excluindo HOJE):</label>
                            <input type="number" id="birthday-range1-days" min="1" max="365" value="7">
                            <small>Exemplo: 7 dias = pr√≥ximos 7 dias.</small>
                        </div>

                        <div class="form-group">
                            <label>Faixa 2 (dias a partir de hoje, excluindo HOJE):</label>
                            <input type="number" id="birthday-range2-days" min="1" max="365" value="30">
                            <small>Exemplo: 30 dias = pr√≥ximos 30 dias.</small>
                        </div>

                        <button type="button" class="btn btn-primary" onclick="saveBirthdayCardSettings()">Salvar Configura√ß√µes</button>
                        <button type="button" class="btn btn-secondary" onclick="showSection('more-options')" style="margin-left: 10px;">‚Üê Voltar</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Defini√ß√µes dos Bot√µes -->
        <section id="button-settings" class="section">
            <h2>Defini√ß√µes dos Bot√µes</h2>
            <div class="settings-container">
                <div class="settings-card">
                    <h3>Bot√µes de Navega√ß√£o (In√≠cio, Felicita√ß√µes, Clientes, ...)</h3>
                    <form id="button-settings-form" class="form">
                        <div class="form-group">
                            <label for="btn-text-color">Cor do Texto dos Bot√µes:</label>
                            <div class="color-picker-row">
                                <input type="color" id="btn-text-color">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="btn-bg-color">Cor de Fundo dos Bot√µes:</label>
                            <div class="color-picker-row">
                                <input type="color" id="btn-bg-color">
                            </div>
                            <div style="margin-top: 8px;">
                                <label>
                                    <input type="checkbox" id="btn-bg-transparent">
                                    Deixar fundo transparente
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="btn-border-color">Cor da Borda:</label>
                            <div class="color-picker-row">
                                <input type="color" id="btn-border-color">
                            </div>
                            <div style="margin-top: 8px;">
                                <label>
                                    <input type="checkbox" id="btn-border-enabled" checked>
                                    Mostrar borda
                                </label>
                            </div>
                        </div>

                        <button type="button" class="btn btn-primary" onclick="saveButtonSettings()">üíæ Salvar Altera√ß√µes</button>
                        <button type="button" class="btn btn-danger" onclick="resetButtonSettings()" style="margin-left: 10px;">üîÑ Restaurar Padr√£o</button>
                        <button type="button" class="btn btn-secondary" onclick="showSection('more-options')" style="margin-left: 10px;">‚Üê Voltar</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Backup -->
        <section id="backup" class="section">
            <h2>Backup dos Dados</h2>
            <div class="backup-restore-container">
                <p>Fa√ßa backup de todos os seus dados (clientes, empresa, felicita√ß√µes e licen√ßa).</p>
                <button class="btn btn-primary" onclick="downloadBackup()">üíæ Fazer Backup</button>
                <button class="btn btn-secondary" onclick="showSection('more-options')" style="margin-top: 15px;">‚Üê Voltar</button>
            </div>
        </section>

        <!-- Se√ß√£o Restaurar -->
        <section id="restore" class="section">
            <h2>Restaurar Dados</h2>
            <div class="backup-restore-container">
                <p>Restaura todos os dados a partir de um arquivo de backup.</p>
                <p style="color: #e74c3c; font-weight: bold;">‚ö†Ô∏è Aten√ß√£o: Esta a√ß√£o ir√° substituir todos os dados atuais!</p>
                <input type="file" id="restore-file-input" accept=".json" style="margin: 20px 0; padding: 10px; width: 100%; max-width: 400px;">
                <button class="btn btn-primary" onclick="restoreBackup()">üì• Restaurar Backup</button>
                <button class="btn btn-secondary" onclick="showSection('more-options')" style="margin-top: 15px;">‚Üê Voltar</button>
            </div>
        </section>

        <!-- Se√ß√£o Suporte -->
        <section id="support" class="section">
            <!-- Primeira Pessoa de Suporte -->
            <div class="support-section-wrapper">
                <div class="support-left">
                    <h2>Suporte</h2>
                    <img id="support-image" src="images/support-photo.jpg" alt="Foto de Suporte" class="support-image" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                </div>
                <div class="support-right">
                    <div class="support-container">
                        <p>Entre em contato conosco atrav√©s dos canais abaixo:</p>
                        <div class="support-buttons">
                            <button class="btn btn-email" onclick="openSupportEmail()">
                                ‚úâÔ∏è EMAIL
                            </button>
                            <button class="btn btn-whatsapp" onclick="openSupportWhatsApp()">
                                üì± WHATSAPP
                            </button>
                        </div>
                        <div class="support-info">
                            <p style="font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #667eea;">Suporte: Maicon Coutinho</p>
                            <p><strong>Email:</strong> mcn.coutinho@gmail.com</p>
                            <p><strong>WhatsApp:</strong> 41 98819 2359</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Segunda Pessoa de Suporte -->
            <div class="support-section-wrapper support-section-reverse">
                <div class="support-left-reverse">
                    <div class="support-container">
                        <p>Entre em contato conosco atrav√©s dos canais abaixo:</p>
                        <div class="support-buttons">
                            <button class="btn btn-email" onclick="openSupportEmailMarcio()">
                                ‚úâÔ∏è EMAIL
                            </button>
                            <button class="btn btn-whatsapp" onclick="openSupportWhatsAppMarcio()">
                                üì± WHATSAPP
                            </button>
                        </div>
                        <div class="support-info">
                            <p style="font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #667eea;">Suporte: Marcio Mendes</p>
                            <p><strong>Email:</strong> mendesmarciodji@gmail.com</p>
                            <p><strong>WhatsApp:</strong> 41 998734231</p>
                        </div>
                    </div>
                </div>
                <div class="support-right-reverse">
                    <img id="support-image-marcio" src="images/marcio.jpg" alt="Foto de Suporte - Marcio" class="support-image" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showSection('more-options')">‚Üê Voltar</button>
            </div>
        </section>

        <!-- Se√ß√£o Adquirir Licen√ßa -->
        <section id="license" class="section">
            <h2>Adquirir Licen√ßa</h2>
            <div class="license-container">
                <div id="license-expiration-warning-license" class="license-expiration-warning" style="display: none;">
                    <p>‚ö†Ô∏è Sua licen√ßa est√° expirada. Por favor, renove sua licen√ßa.</p>
                </div>
                <p>Digite a chave da licen√ßa no formato abaixo:</p>
                <p style="color: #666; font-size: 14px;">Formato: XXXX-XXXX-XXXX-XXXX</p>
                <form id="license-form" class="form">
                    <div class="form-group">
                        <label for="license-key">Chave da Licen√ßa</label>
                        <input type="text" id="license-key" placeholder="XXXX-XXXX-XXXX-XXXX" maxlength="19" pattern="[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}">
                    </div>
                    <button type="submit" class="btn btn-primary">üîë Ativar Licen√ßa</button>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button type="button" class="btn btn-secondary" onclick="showSection('more-options')">‚Üê Voltar</button>
                        <button type="button" id="support-btn-expired" class="btn btn-support" onclick="showSection('support')" style="display: none;">üÜò Suporte</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Se√ß√£o Status da Licen√ßa -->
        <section id="license-status" class="section">
            <h2>Status da Licen√ßa</h2>
            <div id="license-status-content" class="license-status-container">
                <!-- Conte√∫do ser√° preenchido via JavaScript -->
            </div>
            <button class="btn btn-secondary" onclick="showSection('more-options')" style="margin-top: 20px;">‚Üê Voltar</button>
        </section>

        <!-- Se√ß√£o Usu√°rios -->
        <section id="users" class="section">
            <div class="users-layout">
                <div class="users-main-content">
                    <div class="users-header">
                        <h2>Usu√°rios</h2>
                        <button class="btn btn-primary" onclick="showUsersRegisterView()">‚ûï Cadastrar Usu√°rio</button>
                    </div>
                    
                    <!-- Lista de Usu√°rios -->
                    <div id="users-list-view" class="users-view">
                        <div id="users-list" class="clients-list">
                            <!-- Usu√°rios ser√£o carregados aqui -->
                        </div>
                    </div>
                    
                    <!-- Formul√°rio de Cadastro/Edi√ß√£o -->
                    <div id="users-register-view" class="users-view" style="display: none;">
                        <form id="user-form" class="form">
                            <h3 id="user-form-title">Cadastrar Novo Usu√°rio</h3>
                            
                            <div class="form-group">
                                <label for="user-photo-input">Foto do Usu√°rio</label>
                                <input type="file" id="user-photo-input" accept="image/*">
                                <div class="user-photo-preview" style="margin-top: 15px;">
                                    <img id="user-photo-preview" src="" alt="Preview" style="display: none; max-width: 200px; max-height: 200px; border-radius: 10px; border: 2px solid #e0e0e0;">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="user-name">Nome *</label>
                                <input type="text" id="user-name" required>
                            </div>

                            <div class="form-group">
                                <label for="user-username">Usu√°rio *</label>
                                <input type="text" id="user-username" required>
                            </div>

                            <div class="form-group">
                                <label for="user-password">Senha *</label>
                                <input type="password" id="user-password" required>
                            </div>

                            <div class="form-group">
                                <label for="user-birthdate">Data de Nascimento *</label>
                                <input type="date" id="user-birthdate" required>
                            </div>

                            <div class="form-group">
                                <label for="user-phone">Telefone *</label>
                                <input type="tel" id="user-phone" placeholder="(00) 00000-0000" required>
                            </div>

                            <div class="form-group">
                                <label for="user-email">Email *</label>
                                <input type="email" id="user-email" required>
                            </div>

                            <div class="form-group">
                                <label for="user-access-level">Controle de Acesso *</label>
                                <select id="user-access-level" required>
                                    <option value="">Selecione...</option>
                                    <option value="admin">Administrador</option>
                                    <option value="funcionario">Funcion√°rio</option>
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary">Salvar Usu√°rio</button>
                            <button type="button" class="btn btn-secondary" onclick="showUsersListView()" style="margin-top: 15px; margin-left: 10px;">‚Üê Voltar</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para Editar Usu√°rio -->
    <div id="edit-user-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditUserModal()">&times;</span>
            <h2>Editar Usu√°rio</h2>
            <form id="edit-user-form" class="form">
                <input type="hidden" id="edit-user-id">
                
                <div class="form-group">
                    <label for="edit-user-photo-input">Foto do Usu√°rio</label>
                    <input type="file" id="edit-user-photo-input" accept="image/*">
                    <div class="user-photo-preview" style="margin-top: 15px;">
                        <img id="edit-user-photo-preview" src="" alt="Preview" style="display: none; max-width: 200px; max-height: 200px; border-radius: 10px; border: 2px solid #e0e0e0;">
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-user-name">Nome *</label>
                    <input type="text" id="edit-user-name" required>
                </div>

                <div class="form-group">
                    <label for="edit-user-username">Usu√°rio *</label>
                    <input type="text" id="edit-user-username" required>
                </div>

                <div class="form-group">
                    <label for="edit-user-password">Nova Senha (deixe em branco para manter a atual)</label>
                    <input type="password" id="edit-user-password">
                </div>

                <div class="form-group">
                    <label for="edit-user-birthdate">Data de Nascimento *</label>
                    <input type="date" id="edit-user-birthdate" required>
                </div>

                <div class="form-group">
                    <label for="edit-user-phone">Telefone *</label>
                    <input type="tel" id="edit-user-phone" placeholder="(00) 00000-0000" required>
                </div>

                <div class="form-group">
                    <label for="edit-user-email">Email *</label>
                    <input type="email" id="edit-user-email" required>
                </div>

                <div class="form-group">
                    <label for="edit-user-access-level">Controle de Acesso *</label>
                    <select id="edit-user-access-level" required>
                        <option value="">Selecione...</option>
                        <option value="admin">Administrador</option>
                        <option value="funcionario">Funcion√°rio</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
                <button type="button" class="btn btn-secondary" onclick="closeEditUserModal()" style="margin-top: 15px; margin-left: 10px;">Cancelar</button>
            </form>
        </div>
    </div>

    <!-- Modal para Editar Cliente -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2>Editar Cliente</h2>
            <form id="edit-client-form" class="form">
                <input type="hidden" id="edit-client-id">
                
                <div class="form-group">
                    <label for="edit-client-photo-input">Foto do Cliente</label>
                    <input type="file" id="edit-client-photo-input" accept="image/*">
                    <div class="photo-preview">
                        <img id="edit-client-photo-preview" src="" alt="Preview da Foto" style="display: none;">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-client-name">Nome *</label>
                    <input type="text" id="edit-client-name" required>
                </div>

                <div class="form-group">
                    <label for="edit-client-cpf">CPF</label>
                    <input type="text" id="edit-client-cpf" placeholder="000.000.000-00">
                </div>

                <div class="form-group">
                    <label for="edit-client-birthdate">Data de Nascimento *</label>
                    <input type="date" id="edit-client-birthdate" required>
                </div>

                <div class="form-group">
                    <label>Telefones *</label>
                    <div id="edit-phones-container"></div>
                    <button type="button" class="btn btn-secondary" onclick="addEditField('phone')">+ Adicionar Telefone</button>
                </div>

                <div class="form-group">
                    <label>Emails *</label>
                    <div id="edit-emails-container"></div>
                    <button type="button" class="btn btn-secondary" onclick="addEditField('email')">+ Adicionar Email</button>
                </div>

                <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <!-- Modal para Selecionar Cliente para Enviar Felicita√ß√µes -->
    <div id="select-client-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSelectClientModal()">&times;</span>
            <h2>Selecionar Cliente para Enviar Felicita√ß√µes</h2>
            <div id="select-clients-list" class="select-clients-list"></div>
        </div>
    </div>

    <!-- Modal para Escolher M√©todo de Envio -->
    <div id="send-method-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSendMethodModal()">&times;</span>
            <h2>Escolher M√©todo de Envio</h2>
            <p>Como deseja enviar as felicita√ß√µes para <strong id="selected-client-name"></strong>?</p>
            <div class="send-method-buttons">
                <button class="btn btn-whatsapp" onclick="handleSendMethod('whatsapp')">
                    üì± WhatsApp
                </button>
                <button class="btn btn-email" onclick="handleSendMethod('email')">
                    ‚úâÔ∏è Email
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para Escolher A√ß√£o do Email -->
    <div id="email-action-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEmailActionModal()">&times;</span>
            <h2>Escolher A√ß√£o</h2>
            <p>O que deseja fazer com o email de <strong id="email-client-name"></strong>?</p>
            <div class="email-action-buttons">
                <button class="btn btn-copy" onclick="handleEmailAction('copy')">
                    üìã Copiar Email
                </button>
                <button class="btn btn-gmail" onclick="handleEmailAction('gmail')">
                    üìß Abrir Gmail
                </button>
            </div>
        </div>
    </div>

        <!-- Se√ß√£o Configura√ß√µes -->
        <section id="settings" class="section">
            <div class="settings-container">
                <div class="settings-card">
                    <h2>Configura√ß√µes do Tema</h2>
                    <h3>Personaliza√ß√£o do Tema</h3>
                <div class="form-group">
                    <label for="theme-color-picker">Cor Principal do Sistema:</label>
                    <div class="color-picker-container">
                        <div class="color-picker-row">
                            <input type="color" id="theme-color-picker" value="#667eea">
                            <span class="color-preview" id="color-preview">#667eea</span>
                        </div>
                    </div>
                    <p class="color-help">Selecione a cor desejada. Ela ser√° aplicada somente quando voc√™ clicar em "Salvar Altera√ß√£o".</p>
                </div>

                    <div class="form-group">
                        <label for="theme-background-input">Imagem de Fundo (opcional):</label>
                        <input type="file" id="theme-background-input" accept="image/jpeg,image/jpg,image/png">
                        <div class="theme-bg-preview" id="theme-bg-preview">
                            <span>Pr√©-visualiza√ß√£o do fundo (a imagem ser√° ajustada automaticamente para preencher).</span>
                        </div>
                        <p class="color-help">Formatos permitidos: JPG e PNG. Voc√™ pode arrastar a imagem dentro da pr√©-visualiza√ß√£o para reposicion√°-la. O fundo ser√° atualizado somente ao clicar em "Salvar Altera√ß√£o".</p>
                    </div>

                    <div class="color-actions">
                        <button type="button" class="btn btn-primary" onclick="saveThemeColor()">üíæ Salvar Altera√ß√£o</button>
                        <button type="button" class="btn btn-secondary" onclick="resetThemeColor()">üîÑ Restaurar Padr√£o</button>
                        <button class="btn btn-secondary" onclick="showSection('more-options')" style="margin-left: 10px;">‚Üê Voltar</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Log do Sistema -->
        <section id="system-log" class="section">
            <div class="log-container">
                <div class="log-header">
                    <h2>Log do Sistema</h2>
                    <div class="log-controls">
                        <button class="btn btn-secondary" onclick="showLogSettings()">‚öôÔ∏è Configura√ß√µes</button>
                        <button class="btn btn-secondary" onclick="clearOldLogs()">üóëÔ∏è Limpar Logs Antigos</button>
                    </div>
                </div>
                
                <!-- Filtros -->
                <div class="log-filters">
                    <div class="form-group">
                        <label for="log-filter-date">Filtrar por Data:</label>
                        <input type="date" id="log-filter-date">
                    </div>
                    <div class="form-group">
                        <label for="log-filter-user">Filtrar por Usu√°rio:</label>
                        <select id="log-filter-user">
                            <option value="">Todos os usu√°rios</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="log-filter-action">Filtrar por A√ß√£o:</label>
                        <select id="log-filter-action">
                            <option value="">Todas as a√ß√µes</option>
                            <option value="login">Login</option>
                            <option value="logout">Logout</option>
                            <option value="create_client">Criar Cliente</option>
                            <option value="edit_client">Editar Cliente</option>
                            <option value="delete_client">Excluir Cliente</option>
                            <option value="create_user">Criar Usu√°rio</option>
                            <option value="edit_user">Editar Usu√°rio</option>
                            <option value="delete_user">Excluir Usu√°rio</option>
                            <option value="send_greeting">Enviar Felicita√ß√£o</option>
                            <option value="backup">Backup</option>
                            <option value="restore">Restaurar</option>
                            <option value="license_activate">Ativar Licen√ßa</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="applyLogFilters()">üîç Filtrar</button>
                    <button class="btn btn-secondary" onclick="clearLogFilters()">Limpar Filtros</button>
                </div>
                
                <!-- Lista de Logs -->
                <div id="logs-list" class="logs-list">
                    <!-- Logs ser√£o carregados aqui -->
                </div>
            </div>
        </section>
        
        <!-- Modal de Configura√ß√µes de Log -->
        <div id="log-settings-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeLogSettings()">&times;</span>
                <h2>Configura√ß√µes de Log</h2>
                <div class="form-group">
                    <label for="log-retention-days">Tempo de Reten√ß√£o dos Logs:</label>
                    <select id="log-retention-days">
                        <option value="3">3 dias</option>
                        <option value="7">7 dias</option>
                        <option value="30" selected>30 dias (padr√£o)</option>
                        <option value="90">90 dias</option>
                        <option value="365">1 ano</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="saveLogSettings()">Salvar Configura√ß√µes</button>
                <button class="btn btn-secondary" onclick="closeLogSettings()" style="margin-left: 10px;">Cancelar</button>
            </div>
        </div>

        <!-- Modal para Selecionar Usu√°rio (Trocar) -->
        <div id="select-user-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeSelectUserModal()">&times;</span>
                <h2>Selecionar Usu√°rio</h2>
                <p>Escolha o usu√°rio para fazer login:</p>
                <div id="users-select-list" class="select-clients-list" style="max-height: 400px; overflow-y: auto; margin-top: 20px;">
                    <!-- Lista de usu√°rios ser√° preenchida via JavaScript -->
                </div>
                <button class="btn btn-secondary" onclick="closeSelectUserModal()" style="margin-top: 20px;">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Cropping de Imagem -->
    <div id="image-crop-modal" class="modal">
        <div class="modal-content crop-modal-content">
            <span class="close" onclick="closeCropModal()">&times;</span>
            <h2 id="crop-modal-title">Ajustar Imagem</h2>
            <div class="crop-container">
                <img id="crop-image" src="" alt="Imagem para recortar">
            </div>
            <div class="crop-controls">
                <button type="button" class="btn btn-secondary" onclick="closeCropModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmCrop()">‚úì Confirmar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

